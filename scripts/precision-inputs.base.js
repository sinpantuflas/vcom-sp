module.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(2),a=(n.n(i),n(3));function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=Object(a.a)(),o=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("KnobInput constructor must receive a valid container element");if(!n)throw new Error("KnobInput constructor must receive a valid visual element");if(!e.contains(n))throw new Error("The KnobInput's container element must contain its visual element");var a=i.step||"any",s="number"==typeof i.min?i.min:0,o="number"==typeof i.max?i.max:1;this.initial="number"==typeof i.initial?i.initial:.5*(s+o),this.dragResistance="number"==typeof i.dragResistance?i.dragResistance:100,this.dragResistance*=3,this.dragResistance/=o-s,this.wheelResistance="number"==typeof i.wheelResistance?i.wheelResistance:100,this.wheelResistance*=40,this.wheelResistance/=o-s,this.setupVisualContext="function"==typeof i.visualContext?i.visualContext:t.setupRotationContext(0,360),this.updateVisuals="function"==typeof i.updateVisuals?i.updateVisuals:t.rotationUpdateFunction;var r=document.createElement("input");r.type="range",r.step=a,r.min=s,r.max=o,r.value=this.initial,e.appendChild(r),this._container=e,this._container.classList.add("knob-input__container"),this._input=r,this._input.classList.add("knob-input__input"),this._visualElement=n,this._visualElement.classList.add("knob-input__visual"),this._visualContext={element:this._visualElement,transformProperty:u},this.setupVisualContext.apply(this._visualContext),this.updateVisuals=this.updateVisuals.bind(this._visualContext),this._activeDrag=!1,this._handlers={inputChange:this.handleInputChange.bind(this),touchStart:this.handleTouchStart.bind(this),touchMove:this.handleTouchMove.bind(this),touchEnd:this.handleTouchEnd.bind(this),touchCancel:this.handleTouchCancel.bind(this),mouseDown:this.handleMouseDown.bind(this),mouseMove:this.handleMouseMove.bind(this),mouseUp:this.handleMouseUp.bind(this),mouseWheel:this.handleMouseWheel.bind(this),doubleClick:this.handleDoubleClick.bind(this),focus:this.handleFocus.bind(this),blur:this.handleBlur.bind(this)},this._input.addEventListener("change",this._handlers.inputChange),this._input.addEventListener("touchstart",this._handlers.touchStart),this._input.addEventListener("mousedown",this._handlers.mouseDown),this._input.addEventListener("wheel",this._handlers.mouseWheel),this._input.addEventListener("dblclick",this._handlers.doubleClick),this._input.addEventListener("focus",this._handlers.focus),this._input.addEventListener("blur",this._handlers.blur),this.updateToInputValue()}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"handleInputChange",value:function(t){this.updateToInputValue()}},{key:"handleTouchStart",value:function(t){this.clearDrag(),t.preventDefault();var e=t.changedTouches.item(t.changedTouches.length-1);this._activeDrag=e.identifier,this.startDrag(e.clientY),document.body.addEventListener("touchmove",this._handlers.touchMove),document.body.addEventListener("touchend",this._handlers.touchEnd),document.body.addEventListener("touchcancel",this._handlers.touchCancel)}},{key:"handleTouchMove",value:function(t){var e=this.findActiveTouch(t.changedTouches);e?this.updateDrag(e.clientY):this.findActiveTouch(t.touches)||this.clearDrag()}},{key:"handleTouchEnd",value:function(t){var e=this.findActiveTouch(t.changedTouches);e&&this.finalizeDrag(e.clientY)}},{key:"handleTouchCancel",value:function(t){this.findActiveTouch(t.changedTouches)&&this.clearDrag()}},{key:"handleMouseDown",value:function(t){this.clearDrag(),t.preventDefault(),this._activeDrag=!0,this.startDrag(t.clientY),document.body.addEventListener("mousemove",this._handlers.mouseMove),document.body.addEventListener("mouseup",this._handlers.mouseUp)}},{key:"handleMouseMove",value:function(t){1&t.buttons?this.updateDrag(t.clientY):this.finalizeDrag(t.clientY)}},{key:"handleMouseUp",value:function(t){this.finalizeDrag(t.clientY)}},{key:"handleMouseWheel",value:function(t){t.preventDefault(),this._input.focus(),this.clearDrag(),this._prevValue=parseFloat(this._input.value),this.updateFromDrag(t.deltaY,this.wheelResistance)}},{key:"handleDoubleClick",value:function(t){this.clearDrag(),this._input.value=this.initial,this.updateToInputValue()}},{key:"handleFocus",value:function(t){this._container.classList.add("focus-active")}},{key:"handleBlur",value:function(t){this._container.classList.remove("focus-active")}},{key:"startDrag",value:function(t){this._dragStartPosition=t,this._prevValue=parseFloat(this._input.value),this._input.focus(),document.body.classList.add("knob-input__drag-active"),this._container.classList.add("drag-active"),this._input.dispatchEvent(new InputEvent("knobdragstart"))}},{key:"updateDrag",value:function(t){var e=t-this._dragStartPosition;this.updateFromDrag(e,this.dragResistance),this._input.dispatchEvent(new InputEvent("change"))}},{key:"finalizeDrag",value:function(t){var e=t-this._dragStartPosition;this.updateFromDrag(e,this.dragResistance),this.clearDrag(),this._input.dispatchEvent(new InputEvent("change")),this._input.dispatchEvent(new InputEvent("knobdragend"))}},{key:"clearDrag",value:function(){document.body.classList.remove("knob-input__drag-active"),this._container.classList.remove("drag-active"),this._activeDrag=!1,this._input.dispatchEvent(new InputEvent("change")),document.body.removeEventListener("mousemove",this._handlers.mouseMove),document.body.removeEventListener("mouseup",this._handlers.mouseUp),document.body.removeEventListener("touchmove",this._handlers.touchMove),document.body.removeEventListener("touchend",this._handlers.touchEnd),document.body.removeEventListener("touchcancel",this._handlers.touchCancel)}},{key:"updateToInputValue",value:function(){var t=parseFloat(this._input.value);this.updateVisuals(this.normalizeValue(t),t)}},{key:"updateFromDrag",value:function(t,e){var n=this.clampValue(this._prevValue-t/e);this._input.value=n,this.updateVisuals(this.normalizeValue(n),n)}},{key:"clampValue",value:function(t){var e=parseFloat(this._input.min),n=parseFloat(this._input.max);return Math.min(Math.max(t,e),n)}},{key:"normalizeValue",value:function(t){var e=parseFloat(this._input.min);return(t-e)/(parseFloat(this._input.max)-e)}},{key:"findActiveTouch",value:function(t){var e,n;for(e=0,n=t.length;e<n;e++)if(this._activeDrag===t.item(e).identifier)return t.item(e);return null}},{key:"addEventListener",value:function(){this._input.addEventListener.apply(this._input,arguments)}},{key:"removeEventListener",value:function(){this._input.removeEventListener.apply(this._input,arguments)}},{key:"focus",value:function(){this._input.focus.apply(this._input,arguments)}},{key:"blur",value:function(){this._input.blur.apply(this._input,arguments)}},{key:"value",get:function(){return parseFloat(this._input.value)},set:function(t){this._input.value=t,this.updateToInputValue(),this._input.dispatchEvent(new Event("change"))}}],[{key:"setupRotationContext",value:function(t,e){return function(){this.minRotation=t,this.maxRotation=e}}},{key:"rotationUpdateFunction",value:function(t){this.element.style[this.transformProperty]="rotate(".concat(this.maxRotation*t-this.minRotation*(t-1),"deg)")}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.default={KnobInput:i.a}},function(t,e){},function(t,e,n){"use strict";e.a=function(){return function(t){for(var e=0;e<t.length;e++)if(void 0!==document.body.style[t[e]])return t[e];return null}(["transform","msTransform","webkitTransform","mozTransform","oTransform"])}}]).default;
